\definecolor{000000}{rgb}{0.000,0.000,0.000}
\definecolor{0000BB}{rgb}{0.000,0.000,0.733}
\definecolor{007700}{rgb}{0.000,0.467,0.000}
\definecolor{DD0000}{rgb}{0.867,0.000,0.000}
\definecolor{FF8000}{rgb}{1.000,0.502,0.000}
\begin{noindent}{\color{000000} 
{\color{0000BB} }\\
{\color{0000BB} }\\
{\color{0000BB} \$grid\hspace{0.1in}}}{\color{007700} =\hspace{0.1in}}{\color{0000BB} \$db}{\color{007700} ->}{\color{0000BB} getGridFS}{\color{007700} ();}\\
{\color{007700} }\\
{\color{007700} }{\color{0000BB} \$file\hspace{0.1in}}{\color{007700} =\hspace{0.1in}}{\color{0000BB} \$grid}{\color{007700} ->}{\color{0000BB} findOne}{\color{007700} (array(}{\color{DD0000} 'path'\hspace{0.1in}}{\color{007700} =>\hspace{0.1in}}{\color{DD0000} '/foo'}{\color{007700} ));}\\
{\color{007700} }\\
{\color{007700} }{\color{FF8000} //\hspace{0.1in}update\hspace{0.1in}download}\\
{\color{FF8000} }{\color{0000BB} \$update\hspace{0.1in}}{\color{007700} =\hspace{0.1in}array(}{\color{DD0000} '\$inc'\hspace{0.1in}}{\color{007700} =>\hspace{0.1in}array(}{\color{DD0000} 'download'\hspace{0.1in}}{\color{007700} =>\hspace{0.1in}}{\color{0000BB} 1}{\color{007700} ));}\\
{\color{007700} }{\color{0000BB} \$id\hspace{0.1in}}{\color{007700} =\hspace{0.1in}array(}{\color{DD0000} '\_id'\hspace{0.1in}}{\color{007700} =>\hspace{0.1in}}{\color{0000BB} \$file}{\color{007700} ->}{\color{0000BB} file}{\color{007700} [}{\color{DD0000} '\_id'}{\color{007700} ]);}\\
{\color{007700} }{\color{0000BB} \$grid}{\color{007700} ->}{\color{0000BB} update}{\color{007700} (}{\color{0000BB} \$id}{\color{007700} ,\hspace{0.1in}}{\color{0000BB} \$update}{\color{007700} );}\\
{\color{007700} }\\
{\color{007700} }{\color{FF8000} //\hspace{0.1in}print\hspace{0.1in}it}\\
{\color{FF8000} }{\color{007700} echo\hspace{0.1in}}{\color{0000BB} \$file}{\color{007700} ->}{\color{0000BB} Bytes}{\color{007700} ();}\\
{\color{007700} }\\
{\color{007700} }{\color{FF8000} //\hspace{0.1in}or\hspace{0.1in}(a\hspace{0.1in}bit\hspace{0.1in}better)}\\
{\color{FF8000} }{\color{0000BB} \$tmp\hspace{0.1in}}{\color{007700} =\hspace{0.1in}}{\color{DD0000} '/tmp/apache/'\hspace{0.1in}}{\color{007700} .\hspace{0.1in}}{\color{0000BB} \$file}{\color{007700} ->}{\color{0000BB} file}{\color{007700} [}{\color{DD0000} '\_id'}{\color{007700} ];}\\
{\color{007700} if\hspace{0.1in}(!}{\color{0000BB} is\_file}{\color{007700} (}{\color{0000BB} \$tmp}{\color{007700} ))\hspace{0.1in}}{\color{0000BB} \$file}{\color{007700} ->}{\color{0000BB} write}{\color{007700} (}{\color{0000BB} \$tmp}{\color{007700} );}\\
{\color{007700} }{\color{0000BB} virtual}{\color{007700} (}{\color{0000BB} \$tmp}{\color{007700} );}\\
{\color{007700} }

\end{noindent}
