\definecolor{000000}{rgb}{0.000,0.000,0.000}
\definecolor{0000BB}{rgb}{0.000,0.000,0.733}
\definecolor{FF8000}{rgb}{1.000,0.502,0.000}
\definecolor{007700}{rgb}{0.000,0.467,0.000}
\begin{noindent}{\color{000000} 
{\color{0000BB} }\\
{\color{0000BB} }\\
{\color{0000BB} }}{\color{FF8000} //\hspace{0.1in}This\hspace{0.1in}method\hspace{0.1in}will\hspace{0.1in}be\hspace{0.1in}executed\hspace{0.1in}for\hspace{0.1in}each\hspace{0.1in}news}\\
{\color{FF8000} }{\color{007700} var\hspace{0.1in}}{\color{0000BB} \$map\hspace{0.1in}}{\color{007700} =\hspace{0.1in}function()\hspace{0.1in}\{}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{FF8000} //\hspace{0.1in}if\hspace{0.1in}the\hspace{0.1in}document\hspace{0.1in}doesn't\hspace{0.1in}have\hspace{0.1in}categories}\\
{\color{FF8000} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{007700} if\hspace{0.1in}(!}{\color{0000BB} this}{\color{007700} .}{\color{0000BB} categories}{\color{007700} )\hspace{0.1in}\{}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{FF8000} //\hspace{0.1in}return\hspace{0.1in}nothing}\\
{\color{FF8000} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{007700} return;}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\}}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}for\hspace{0.1in}(}{\color{0000BB} \$index\hspace{0.1in}in\hspace{0.1in}this}{\color{007700} .}{\color{0000BB} categories}{\color{007700} )\hspace{0.1in}\{}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{FF8000} //\hspace{0.1in}return\hspace{0.1in}(several\hspace{0.1in}times)\hspace{0.1in}a\hspace{0.1in}new\hspace{0.1in}document}\\
{\color{FF8000} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}//\hspace{0.1in}with\hspace{0.1in}\_id:\hspace{0.1in}category\_name,\hspace{0.1in}and\hspace{0.1in}value:\hspace{0.1in}1}\\
{\color{FF8000} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}}{\color{0000BB} emit}{\color{007700} (}{\color{0000BB} this}{\color{007700} .}{\color{0000BB} categories}{\color{007700} [}{\color{0000BB} \$index}{\color{007700} ].}{\color{0000BB} name}{\color{007700} ,\hspace{0.1in}}{\color{0000BB} 1}{\color{007700} );}\\
{\color{007700} \hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\hspace{0.1in}\}}\\
{\color{007700} \}}\\
{\color{007700} }

\end{noindent}
